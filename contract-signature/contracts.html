<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>查看保存的合同</title>
</head>
<body>
    <h1>查看保存的合同</h1>
    <div id="contracts-container"></div>

    <script>
        // 读取保存的合同（从 GitHub Issues 获取）
        fetch('https://api.github.com/repos/nm594188/contract-signature/issues', {
            method: 'GET',
            headers: {
                'Authorization': 'token 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', // 替换为你的 GitHub token
                'Accept': 'application/vnd.github.v3+json'
            }
        }).then(response => response.json())
          .then(issues => {
              const container = document.getElementById('contracts-container');
              issues.forEach(issue => {
                  const contractContent = JSON.parse(issue.body);
                  const contractDiv = document.createElement('div');
                  contractDiv.innerHTML = `
                      <h2>${issue.title}</h2>
                      <p>签名时间：${new Date(contractContent.timestamp).toLocaleString()}</p>
                      <img src="${contractContent.signature}" alt="签名">
                      <div>${contractContent.contractContent}</div>
                  `;
                  container.appendChild(contractDiv);
              });
          }).catch(error => {
              console.error('Error:', error);
          });
    </script>
</body>
</html>
